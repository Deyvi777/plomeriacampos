---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import BaseLayout from "@layouts/BaseLayout.astro";
import BlogInsight from "@components/blog/BlogInsight.astro";
import HeroSection from "@components/ui/sections/HeroSection.astro";
import FeaturesSection from "@components/ui/sections/FeaturesSection.astro";
import HeroSectionAlt from "@components/ui/sections/HeroSectionAlt.astro";
import blogHeroImg from "@images/home.webp";

const posts: CollectionEntry<"posts">[] = (await getCollection("posts"))
    .sort(
        (a: CollectionEntry<"posts">, b: CollectionEntry<"posts">) =>
            b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
    )
    .slice(0, 3);
---

<BaseLayout>
    <HeroSection
        title=`Plomería <span class="text-[#274e86] dark:text-[#80cce2]">Campos</span>`
        subTitle="Servicios de plomería, instalaciones de gas y electricidad"
        primaryBtn="Nuestros servicios"
        primaryBtnURL="/services"
        src={blogHeroImg}
        alt="Plomería Campos"
    />

    <FeaturesSection />

    <section
        class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 2xl:max-w-full"
    >
        <div class="mx-auto mb-10 max-w-2xl text-center lg:mb-14">
            <h2
                class="text-3xl font-bold text-neutral-800 dark:text-neutral-200 md:text-4xl md:leading-tight"
            >
                Nuestros servicios
            </h2>
            <p class="mt-1 text-pretty text-neutral-600 dark:text-neutral-400">
                Conoce más sobre nuestros servicios de plomería, instalaciones
                de gas y electricidad
            </p>
        </div>
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
            {posts.map((b) => <BlogInsight blog={b} />)}
        </div>
    </section>

    <HeroSectionAlt
        title="Contáctanos por WhatsApp"
        subTitle="Escribenos para cualquier consulta"
        url="https://wa.me/59172746800"
    />
</BaseLayout>
